webpackJsonp([0],{"1/oy":function(t,i){},"1xwK":function(t,i){},"9M+g":function(t,i){},AqYs:function(t,i,e){t.exports=e.p+"static/img/logo.1966635.svg"},GfHa:function(t,i){},Id91:function(t,i){},Jmt5:function(t,i){},NHnr:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e("7+uW"),a=e("e6fC");e("Jmt5"),e("9M+g");r.a.use(a.a);var s={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},staticRenderFns:[]};var n=e("VU/8")({name:"App"},s,!1,function(t){e("1xwK")},null,null).exports,o=e("/ocq"),l=e("GDE4"),c=e.n(l),p={name:"sprite4d",computed:{row_idx:function(){return Math.floor(this.time/this.M)},col_idx:function(){return this.time%this.M},style:function(){var t={width:this.pix+"px",height:this.pix+"px",zoom:3,"background-position-x":"-"+this.col_idx*this.pix+"px","background-position-y":"-"+this.row_idx*this.pix+"px","background-image":"url('data:image/png;base64,"+this.img+"')",display:"inline-flex",opacity:this.opacity};return this.overlayMode&&(t.position="absolute",t.left="calc(50% - "+this.pix/2+"px)"),t}},data:function(){return{}},methods:{},mounted:function(){},watch:{time:function(){}},props:["M","N","pix","num_slices","img","id","time","overlayMode","opacity"]},d={render:function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"mt-3"},[i("div",{staticClass:"sprite",style:this.style,attrs:{id:this.id}})])},staticRenderFns:[]};var h=e("VU/8")(p,d,!1,function(t){e("bFKY")},null,null).exports,u=e("vwbq");window.d3=u;var m={name:"lineChart",data:function(){return{svg:null,g:null,x:null,y:null,xDomain:[0,1],yDomain:[0,1],margin:{top:20,right:20,bottom:30,left:50},lines:[]}},computed:{width:function(){return this.$refs.chart.clientWidth-this.margin.left-this.margin.right},height:function(){return this.$refs.chart.clientHeight-this.margin.top-this.margin.bottom}},watch:{highlightIdx:function(){this.updateHighlightPoints()}},methods:{initAx:function(){var t=u.select("#"+this.id),i=t.append("g").attr("transform","translate("+this.margin.left+", "+this.margin.top+")"),e=u.scaleLinear().range([this.height,0]),r=u.scaleLinear().range([0,this.width]);this.svg=t,this.g=i,this.x=r,this.y=e,this.initXaxis(),this.initYaxis(),this.initHighlightPoints()},initXaxis:function(){this.g.append("g").attr("class","x axis").attr("transform","translate(0, "+this.height+")").call(u.axisBottom(this.x))},updateXaxis:function(){this.x.range([0,this.width]).domain(this.xDomain),u.select("#"+this.id+" .x.axis").call(u.axisBottom(this.x))},initYaxis:function(){this.g.append("g").attr("class","y axis").call(u.axisLeft(this.y)).append("text").attr("fill","#000").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text(this.ylabel)},updateYaxis:function(){this.y.range([this.height,0]).domain(this.yDomain),u.select("#"+this.id+" .y.axis").call(u.axisLeft(this.y))},initHighlightPoints:function(){this.g.append("circle").attr("class","dot-series-1"),this.g.append("circle").attr("class","dot-series-2")},updateHighlightPoints:function(){var t=this;u.select("#"+this.id+" .dot-series-1").attr("r",7).attr("cx",function(){return t.x(t.highlightIdx)}).attr("cy",function(){return t.y(t.data[t.highlightIdx][0])}).attr("fill","steelblue"),u.select("#"+this.id+" .dot-series-2").attr("r",7).attr("cx",function(){return t.x(t.highlightIdx)}).attr("cy",function(){return t.y(t.data[t.highlightIdx][0])}).attr("fill","red")},plotData:function(){var t=this,i=u.min(this.data,function(t,i){return i}),e=u.max(this.data,function(t,i){return i}),r=u.max(this.data,function(t,i){return u.max(t)}),a=u.min(this.data,function(t,i){return u.min(t)});this.xDomain=[i,e],this.yDomain=[a,r],this.updateXaxis(),this.updateYaxis();var s=u.line().x(function(i,e){return t.x(e)}).y(function(i,e){return t.y(i[0])}),n=u.line().x(function(i,e){return t.x(e)}).y(function(i,e){return t.y(i[1])});this.lines=[s,n],this.g.append("path").attr("class","series-1").datum(this.data).attr("fill","none").attr("stroke","steelblue").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("d",s),this.g.append("path").attr("class","series-2").datum(this.data).attr("fill","none").attr("stroke","red").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("d",n),this.svg.on("mousemove",function(){})}},mounted:function(){this.initAx(),this.plotData()},props:["ylabel","xlabel","data","id","highlightIdx"]},f={render:function(){var t=this.$createElement;return(this._self._c||t)("svg",{ref:"chart",staticClass:"lineChart",attrs:{id:this.id}})},staticRenderFns:[]};var g=e("VU/8")(m,f,!1,function(t){e("fSe2")},null,null).exports,x={name:"HelloWorld",components:{sprite4d:h,vueSlider:c.a,lineChart:g},data:function(){return{file:null,msg:"Welcome to Your Vue.js App",report:{},time:0,spriteSlice:0}},methods:{get_mid_slice:function(){return Math.floor(this.report.b0.num_slices/2)}},watch:{file:function(){if(this.file){var t=new FileReader,i=this;t.onload=function(t){var e=t.target.result;i.report=JSON.parse(e)},t.readAsText(this.file)}},report:function(){this.report.b0&&(this.spriteSlice=this.get_mid_slice())}}},_={render:function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("b-container",[r("img",{staticClass:"logo",attrs:{src:e("AqYs")}}),t._v(" "),r("h1",[t._v("preAFQ Viewer")]),t._v(" "),r("p",{staticClass:"lead"},[t._v("Upload your report.json file from preAFQ")]),t._v(" "),r("b-form-file",{staticClass:"mt-3",attrs:{state:Boolean(t.file),placeholder:"Choose a file..."},model:{value:t.file,callback:function(i){t.file=i},expression:"file"}}),t._v(" "),t.report.b0?r("div",{staticClass:"mt-3"},[r("h2",{staticClass:"mt-3 pt-3"},[t._v("Corrected dwi")]),t._v(" "),r("p",{staticClass:"lead"},[t._v("Result of eddy")]),t._v(" "),r("vue-slider",{ref:"timeSlider",attrs:{min:0,max:t.report.dwi_corrected[0].num_slices-1},model:{value:t.time,callback:function(i){t.time=i},expression:"time"}}),t._v(" "),t._l(t.report.dwi_corrected,function(i){return r("sprite4d",{key:i.orientation,attrs:{M:i.M,N:i.N,img:i.img,num_slices:i.num_slices,pix:i.pix,id:i.orientation,time:t.time,overlayMode:!1,opacity:"1"}})}),t._v(" "),r("h2",{staticClass:"mt-3 pt-3"},[t._v("Eddy Report")]),t._v(" "),r("p",{staticClass:"lead"},[r("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse1",modifiers:{collapse1:!0}}],attrs:{variant:"primary"}},[t._v("\n        Outliers ("+t._s(t.report.eddy_report.length)+")")])],1),t._v(" "),r("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse1"}},[r("b-card",t._l(t.report.eddy_report,function(i){return r("p",{key:i},[t._v(t._s(i))])}))],1),t._v(" "),r("div",{staticStyle:{height:"200px",width:"100%",display:"inline-flex"}},[r("line-chart",{attrs:{id:"motion_params",data:t.report.eddy_params,xlabel:"TR",ylabel:"RMS",highlightIdx:t.time}})],1),t._v(" "),r("h2",{staticClass:"mt-3 pt-3"},[t._v("Registration + Brain Mask")]),t._v(" "),r("p",{staticClass:"lead"},[t._v("Brain mask computed on T1w, and mapped to B0")]),t._v(" "),r("sprite4d",{key:"bmask2",attrs:{M:t.report.b0.M,N:t.report.b0.N,num_slices:t.report.b0.num_slices,id:"b0_mask",pix:t.report.b0.pix,time:t.spriteSlice,img:t.report.b0.img,opacity:"1"}}),t._v(" "),r("sprite4d",{key:"anat_mask1",attrs:{M:t.report.anat_mask.M,N:t.report.anat_mask.N,num_slices:t.report.anat_mask.num_slices,id:"anat_mask",pix:t.report.anat_mask.pix,time:t.spriteSlice,img:t.report.anat_mask.img,overlayMode:!0,opacity:"1"}}),t._v(" "),r("vue-slider",{ref:"timeSlider",attrs:{min:0,max:t.report.b0.num_slices-1},model:{value:t.spriteSlice,callback:function(i){t.spriteSlice=i},expression:"spriteSlice"}}),t._v(" "),r("h2",{staticClass:"mt-3 pt-3"},[t._v("DTI: ColorFA")]),t._v(" "),r("p",{staticClass:"lead"},[t._v("Color FA mapped on B0")]),t._v(" "),r("sprite4d",{key:"bmask1",attrs:{M:t.report.b0.M,N:t.report.b0.N,num_slices:t.report.b0.num_slices,id:"b0_mask",pix:t.report.b0.pix,time:t.spriteSlice,img:t.report.b0.img,opacity:"1"}}),t._v(" "),r("sprite4d",{key:"colorfa_mask",attrs:{M:t.report.colorFA.M,N:t.report.colorFA.N,num_slices:t.report.colorFA.num_slices,id:"colorfa_mask",pix:t.report.colorFA.pix,time:t.spriteSlice,img:t.report.colorFA.img,overlayMode:!0,opacity:"0.5"}})],2):t._e()],1)},staticRenderFns:[]};var v=e("VU/8")(x,_,!1,function(t){e("fcs6")},"data-v-abf5bdfa",null).exports;r.a.use(o.a);var y=new o.a({routes:[{path:"/",name:"HelloWorld",component:v}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:y,components:{App:n},template:"<App/>"})},bFKY:function(t,i){},fSe2:function(t,i){},fcs6:function(t,i){},zj2Q:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.f927bdbf817d7070816c.js.map