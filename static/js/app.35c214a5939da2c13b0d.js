webpackJsonp([1],{"1/oy":function(t,e){},"4kYn":function(t,e){},"9M+g":function(t,e){},AqYs:function(t,e,a){t.exports=a.p+"static/img/logo.1966635.svg"},GAJY:function(t,e){},GfHa:function(t,e){},Id91:function(t,e){},Jmt5:function(t,e){},JxSv:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n=a("e6fC");a("Jmt5"),a("9M+g");i.a.use(n.a);var r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App"},r,!1,function(t){a("JxSv")},null,null).exports,l=a("/ocq"),s=a("GDE4"),c=a.n(s),h={name:"sprite4d",computed:{row_idx:function(){return Math.floor(this.time/this.M)},col_idx:function(){return this.time%this.M},style:function(){var t={width:this.pix+"px",height:this.pix+"px",zoom:3,"background-position-x":"-"+this.col_idx*this.pix+"px","background-position-y":"-"+this.row_idx*this.pix+"px","background-image":"url('data:image/png;base64,"+this.img+"')",display:"inline-flex",opacity:this.opacity};return this.overlayMode&&(t.position="absolute",t.left="calc(50% - "+this.pix/2+"px)"),t}},data:function(){return{}},methods:{},mounted:function(){},watch:{time:function(){}},props:["M","N","pix","num_slices","img","id","time","overlayMode","opacity"]},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"mt-3"},[e("div",{staticClass:"sprite",style:this.style,attrs:{id:this.id}})])},staticRenderFns:[]};var u=a("VU/8")(h,d,!1,function(t){a("bFKY")},null,null).exports,p=a("vwbq");window.d3=p;var v={name:"lineChart",data:function(){return{svg:null,g:null,x:null,y:null,xDomain:[0,1],yDomain:[0,1],margin:{top:20,right:20,bottom:30,left:50},lines:[]}},computed:{width:function(){return this.$refs.chart.clientWidth-this.margin.left-this.margin.right},height:function(){return this.$refs.chart.clientHeight-this.margin.top-this.margin.bottom}},watch:{highlightIdx:function(){this.updateHighlightPoints()}},methods:{initAx:function(){var t=p.select("#"+this.id),e=t.append("g").attr("transform","translate("+this.margin.left+", "+this.margin.top+")"),a=p.scaleLinear().range([this.height,0]),i=p.scaleLinear().range([0,this.width]);this.svg=t,this.g=e,this.x=i,this.y=a,this.initXaxis(),this.initYaxis(),this.initHighlightPoints()},initXaxis:function(){this.g.append("g").attr("class","x axis").attr("transform","translate(0, "+this.height+")").call(p.axisBottom(this.x))},updateXaxis:function(){this.x.range([0,this.width]).domain(this.xDomain),p.select("#"+this.id+" .x.axis").call(p.axisBottom(this.x))},initYaxis:function(){this.g.append("g").attr("class","y axis").call(p.axisLeft(this.y)).append("text").attr("fill","#000").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text(this.ylabel)},updateYaxis:function(){this.y.range([this.height,0]).domain(this.yDomain),p.select("#"+this.id+" .y.axis").call(p.axisLeft(this.y))},initHighlightPoints:function(){this.g.append("circle").attr("class","dot-series-1"),this.g.append("circle").attr("class","dot-series-2")},updateHighlightPoints:function(){var t=this;p.select("#"+this.id+" .dot-series-1").attr("r",7).attr("cx",function(){return t.x(t.highlightIdx)}).attr("cy",function(){return t.y(t.data[t.highlightIdx][0])}).attr("fill","steelblue"),p.select("#"+this.id+" .dot-series-2").attr("r",7).attr("cx",function(){return t.x(t.highlightIdx)}).attr("cy",function(){return t.y(t.data[t.highlightIdx][1])}).attr("fill","red")},plotData:function(){var t=this,e=p.min(this.data,function(t,e){return e}),a=p.max(this.data,function(t,e){return e}),i=p.max(this.data,function(t,e){return p.max(t)}),n=p.min(this.data,function(t,e){return p.min(t)});this.xDomain=[e,a],this.yDomain=[n,i],this.updateXaxis(),this.updateYaxis();var r=p.line().x(function(e,a){return t.x(a)}).y(function(e,a){return t.y(e[0])}),o=p.line().x(function(e,a){return t.x(a)}).y(function(e,a){return t.y(e[1])});this.lines=[r,o],this.g.append("path").attr("class","series-1").datum(this.data).attr("fill","none").attr("stroke","steelblue").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("d",r),this.g.append("path").attr("class","series-2").datum(this.data).attr("fill","none").attr("stroke","red").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("d",o),this.g.selectAll(".outlier").data(this.outlier_indices).enter().append("rect").attr("class","outlier").attr("x",function(e){return t.x(e)-1.5}).attr("y",function(){return t.y(i)}).attr("width","3px").attr("height",function(){return t.height+"px"}).attr("fill","black"),this.svg.on("mousemove",function(){})}},mounted:function(){this.initAx(),this.plotData()},props:["ylabel","xlabel","data","id","highlightIdx","outlier_indices"]},m={render:function(){var t=this.$createElement;return(this._self._c||t)("svg",{ref:"chart",staticClass:"lineChart",attrs:{id:this.id}})},staticRenderFns:[]};var x=a("VU/8")(v,m,!1,function(t){a("4kYn")},null,null).exports,g=a("mtWM"),f=a.n(g),b=a("5dBV"),S=a.n(b),C=a("woOf"),w=a.n(C);var y=function(t){function e(t,e){return t.imageSmoothingEnabled=e,t}var a={};return"boolean"==typeof(a=w()({},{nanValue:!1,smooth:!1,flagValue:!1,colorBackground:"#000000",flagCoordinates:!1,origin:{X:0,Y:0,Z:0},voxelSize:1,affine:!1,heightColorBar:.04,sizeFont:.075,colorFont:"#FFFFFF",nbDecimals:3,crosshair:!1,colorCrosshair:"#0000FF",sizeCrosshair:.9,title:!1,numSlice:!1},t)).affine&&!1===a.affine&&(a.affine=[[a.voxelSize,0,0,-a.origin.X],[0,a.voxelSize,0,-a.origin.Y],[0,0,a.voxelSize,-a.origin.Z],[0,0,0,1]]),a.canvas=document.getElementById(t.canvas),a.context=a.canvas.getContext("2d"),a.context=e(a.context,a.smooth),a.canvasY=document.createElement("canvas"),a.contextY=a.canvasY.getContext("2d"),a.canvasZ=document.createElement("canvas"),a.contextZ=a.canvasZ.getContext("2d"),a.canvasRead=document.createElement("canvas"),a.contextRead=a.canvasRead.getContext("2d"),a.canvasRead.width=1,a.canvasRead.height=1,a.onclick=void 0!==t.onclick?t.onclick:"",a.flagCoordinates?a.spaceFont=.1:a.spaceFont=0,a.sprite=document.getElementById(t.sprite),a.nbCol=a.sprite.width/t.nbSlice.Y,a.nbRow=a.sprite.height/t.nbSlice.Z,a.nbSlice={X:void 0!==t.nbSlice.X?t.nbSlice.X:a.nbCol*a.nbRow,Y:t.nbSlice.Y,Z:t.nbSlice.Z},a.widthCanvas={X:0,Y:0,Z:0},a.heightCanvas={X:0,Y:0,Z:0,max:0},0==a.numSlice&&(a.numSlice={X:Math.floor(a.nbSlice.X/2),Y:Math.floor(a.nbSlice.Y/2),Z:Math.floor(a.nbSlice.Z/2)}),a.coordinatesSlice={X:0,Y:0,Z:0},a.planes={},a.planes.canvasMaster=document.createElement("canvas"),a.planes.contextMaster=a.planes.canvasMaster.getContext("2d"),t.overlay=void 0!==t.overlay&&t.overlay,t.overlay&&(a.overlay={},a.overlay.sprite=document.getElementById(t.overlay.sprite),a.overlay.nbCol=a.overlay.sprite.width/t.overlay.nbSlice.Y,a.overlay.nbRow=a.overlay.sprite.height/t.overlay.nbSlice.Z,a.overlay.nbSlice={X:void 0!==t.overlay.nbSlice.X?t.overlay.nbSlice.X:a.overlay.nbCol*a.overlay.nbRow,Y:t.overlay.nbSlice.Y,Z:t.overlay.nbSlice.Z},a.overlay.opacity=void 0!==t.overlay.opacity?t.overlay.opacity:1),t.colorMap=void 0!==t.colorMap&&t.colorMap,t.colorMap&&(a.colorMap={},a.colorMap.img=document.getElementById(t.colorMap.img),a.colorMap.min=t.colorMap.min,a.colorMap.max=t.colorMap.max,t.colorMap.hide=void 0!==t.colorMap.hide&&t.colorMap.hide,a.colorMap.canvas=document.createElement("canvas"),a.colorMap.context=a.colorMap.canvas.getContext("2d"),a.colorMap.canvas.width=a.colorMap.img.width,a.colorMap.canvas.height=a.colorMap.img.height,a.colorMap.context.drawImage(a.colorMap.img,0,0,a.colorMap.img.width,a.colorMap.img.height,0,0,a.colorMap.img.width,a.colorMap.img.height)),a.getValue=function(t,e){if(!e)return NaN;var a,i,n,r,o;n=e.canvas.width,r=NaN,o=1/0;for(var l=0;l<n;l++)a=e.context.getImageData(l,0,1,1).data,(i=Math.pow(a[0]-t[0],2)+Math.pow(a[1]-t[1],2)+Math.pow(a[2]-t[2],2))<o&&(r=l,o=i);return r*(e.max-e.min)/(n-1)+e.min},a.updateValue=function(){var t={},e=[],i=[];if(a.overlay&&!a.nanValue)try{t.XW=Math.round(a.numSlice.X%a.nbCol),t.XH=Math.round((a.numSlice.X-t.XW)/a.nbCol),a.contextRead.fillStyle="#FFFFFF",a.contextRead.fillRect(0,0,1,1),a.contextRead.drawImage(a.overlay.sprite,t.XW*a.nbSlice.Y+a.numSlice.Y,t.XH*a.nbSlice.Z+a.nbSlice.Z-a.numSlice.Z-1,1,1,0,0,1,1);var n=a.contextRead.getImageData(0,0,1,1).data;e=255==n[0]&&255==n[1]&&255==n[2],a.contextRead.fillStyle="#000000",a.contextRead.fillRect(0,0,1,1),a.contextRead.drawImage(a.overlay.sprite,t.XW*a.nbSlice.Y+a.numSlice.Y,t.XH*a.nbSlice.Z+a.nbSlice.Z-a.numSlice.Z-1,1,1,0,0,1,1),i=0==(n=a.contextRead.getImageData(0,0,1,1).data)[0]&&0==n[1]&&0==n[2],a.voxelValue=e&&i?NaN:a.getValue(n,a.colorMap)}catch(t){console.warn(t.message),rgb=0,a.nanValue=!0,a.voxelValue=NaN}else a.voxelValue=NaN},a.multiply=function(t,e){for(var a=t.length,i=t[0].length,n=(e.length,e[0].length),r=new Array(a),o=0;o<a;++o){r[o]=new Array(n);for(var l=0;l<n;++l){r[o][l]=0;for(var s=0;s<i;++s)r[o][l]+=t[o][s]*e[s][l]}}return r},a.updateCoordinates=function(){var t=a.multiply(a.affine,[[a.numSlice.X+1],[a.numSlice.Y+1],[a.numSlice.Z+1],[1]]);a.coordinatesSlice.X=t[0],a.coordinatesSlice.Y=t[1],a.coordinatesSlice.Z=t[2]},a.init=function(){a.widthCanvas.X=Math.floor(a.canvas.parentElement.clientWidth*(a.nbSlice.Y/(2*a.nbSlice.X+a.nbSlice.Y))),a.widthCanvas.Y=Math.floor(a.canvas.parentElement.clientWidth*(a.nbSlice.X/(2*a.nbSlice.X+a.nbSlice.Y))),a.widthCanvas.Z=Math.floor(a.canvas.parentElement.clientWidth*(a.nbSlice.X/(2*a.nbSlice.X+a.nbSlice.Y))),a.widthCanvas.max=Math.max(a.widthCanvas.X,a.widthCanvas.Y,a.widthCanvas.Z),a.heightCanvas.X=Math.floor(a.widthCanvas.X*a.nbSlice.Z/a.nbSlice.Y),a.heightCanvas.Y=Math.floor(a.widthCanvas.Y*a.nbSlice.Z/a.nbSlice.X),a.heightCanvas.Z=Math.floor(a.widthCanvas.Z*a.nbSlice.Y/a.nbSlice.X),a.heightCanvas.max=Math.max(a.heightCanvas.X,a.heightCanvas.Y,a.heightCanvas.Z),a.canvas.width!=a.widthCanvas.X+a.widthCanvas.Y+a.widthCanvas.Z&&(a.canvas.width=a.widthCanvas.X+a.widthCanvas.Y+a.widthCanvas.Z,a.canvas.height=Math.round((1+a.spaceFont)*a.heightCanvas.max),a.context=e(a.context,a.smooth)),a.sizeFontPixels=Math.round(a.sizeFont*a.heightCanvas.max),a.context.font=a.sizeFontPixels+"px Arial",a.planes.canvasMaster.width=a.sprite.width,a.planes.canvasMaster.height=a.sprite.height,a.planes.contextMaster.globalAlpha=1,a.planes.contextMaster.drawImage(a.sprite,0,0,a.sprite.width,a.sprite.height,0,0,a.sprite.width,a.sprite.height),a.overlay&&(a.planes.contextMaster.globalAlpha=a.overlay.opacity,a.planes.contextMaster.drawImage(a.overlay.sprite,0,0,a.overlay.sprite.width,a.overlay.sprite.height,0,0,a.sprite.width,a.sprite.height)),a.planes.canvasX=document.createElement("canvas"),a.planes.contextX=a.planes.canvasX.getContext("2d"),a.planes.canvasX.width=a.nbSlice.Y,a.planes.canvasX.height=a.nbSlice.Z,a.planes.canvasY=document.createElement("canvas"),a.planes.contextY=a.planes.canvasY.getContext("2d"),a.planes.canvasY.width=a.nbSlice.X,a.planes.canvasY.height=a.nbSlice.Z,a.planes.canvasZ=document.createElement("canvas"),a.planes.contextZ=a.planes.canvasZ.getContext("2d"),a.planes.canvasZ.width=a.nbSlice.X,a.planes.canvasZ.height=a.nbSlice.Y,a.planes.contextZ.rotate(-Math.PI/2),a.planes.contextZ.translate(-a.nbSlice.Y,0),a.updateValue(),a.updateCoordinates(),a.numSlice.X=Math.round(a.numSlice.X),a.numSlice.Y=Math.round(a.numSlice.Y),a.numSlice.Z=Math.round(a.numSlice.Z)},a.draw=function(t,e){var i,n,r={},o={X:"",Y:"",Z:""};switch(o.X=Math.ceil((1-a.sizeCrosshair)*a.nbSlice.X/2),o.Y=Math.ceil((1-a.sizeCrosshair)*a.nbSlice.Y/2),o.Z=Math.ceil((1-a.sizeCrosshair)*a.nbSlice.Z/2),e){case"X":r.XW=a.numSlice.X%a.nbCol,r.XH=(a.numSlice.X-r.XW)/a.nbCol,a.planes.contextX.drawImage(a.planes.canvasMaster,r.XW*a.nbSlice.Y,r.XH*a.nbSlice.Z,a.nbSlice.Y,a.nbSlice.Z,0,0,a.nbSlice.Y,a.nbSlice.Z),a.crosshair&&(a.planes.contextX.fillStyle=a.colorCrosshair,a.planes.contextX.fillRect(a.numSlice.Y,o.Z,1,a.nbSlice.Z-2*o.Z),a.planes.contextX.fillRect(o.Y,a.nbSlice.Z-a.numSlice.Z-1,a.nbSlice.Y-2*o.Y,1)),a.context.fillStyle=a.colorBackground,a.context.fillRect(0,0,a.widthCanvas.X,a.canvas.height),a.context.drawImage(a.planes.canvasX,0,0,a.nbSlice.Y,a.nbSlice.Z,0,(a.heightCanvas.max-a.heightCanvas.X)/2,a.widthCanvas.X,a.heightCanvas.X),a.title&&(a.context.fillStyle=a.colorFont,a.context.fillText(a.title,Math.round(a.widthCanvas.X/10),Math.round(a.heightCanvas.max*a.heightColorBar+.25*a.sizeFontPixels))),a.flagValue&&(value="value = "+S()(a.voxelValue).toPrecision(a.nbDecimals).replace(/0+$/,""),valueWidth=a.context.measureText(value).width,a.context.fillStyle=a.colorFont,a.context.fillText(value,Math.round(a.widthCanvas.X/10),Math.round(a.heightCanvas.max*a.heightColorBar*2+.75*a.sizeFontPixels))),a.flagCoordinates&&(i="x = "+Math.round(a.coordinatesSlice.X),n=a.context.measureText(i).width,a.context.fillStyle=a.colorFont,a.context.fillText(i,a.widthCanvas.X/2-n/2,Math.round(a.canvas.height-a.sizeFontPixels/2)));break;case"Y":a.context.fillStyle=a.colorBackground,a.context.fillRect(a.widthCanvas.X,0,a.widthCanvas.Y,a.canvas.height);for(var l=0;l<a.nbSlice.X;l++){var s=l%a.nbCol,c=(l-s)/a.nbCol;a.planes.contextY.drawImage(a.planes.canvasMaster,s*a.nbSlice.Y+a.numSlice.Y,c*a.nbSlice.Z,1,a.nbSlice.Z,l,0,1,a.nbSlice.Z)}a.crosshair&&(a.planes.contextY.fillStyle=a.colorCrosshair,a.planes.contextY.fillRect(a.numSlice.X,o.Z,1,a.nbSlice.Z-2*o.Z),a.planes.contextY.fillRect(o.X,a.nbSlice.Z-a.numSlice.Z-1,a.nbSlice.X-2*o.X,1)),a.context.drawImage(a.planes.canvasY,0,0,a.nbSlice.X,a.nbSlice.Z,a.widthCanvas.X,(a.heightCanvas.max-a.heightCanvas.Y)/2,a.widthCanvas.Y,a.heightCanvas.Y),a.colorMap&&!a.colorMap.hide&&(a.context.drawImage(a.colorMap.img,0,0,a.colorMap.img.width,1,Math.round(a.widthCanvas.X+.2*a.widthCanvas.Y),Math.round(a.heightCanvas.max*a.heightColorBar/2),Math.round(.6*a.widthCanvas.Y),Math.round(a.heightCanvas.max*a.heightColorBar)),a.context.fillStyle=a.colorFont,label_min=S()(a.colorMap.min).toPrecision(a.nbDecimals).replace(/0+$/,""),label_max=S()(a.colorMap.max).toPrecision(a.nbDecimals).replace(/0+$/,""),a.context.fillText(label_min,a.widthCanvas.X+.2*a.widthCanvas.Y-a.context.measureText(label_min).width/2,Math.round(a.heightCanvas.max*a.heightColorBar*2+.75*a.sizeFontPixels)),a.context.fillText(label_max,a.widthCanvas.X+.8*a.widthCanvas.Y-a.context.measureText(label_max).width/2,Math.round(a.heightCanvas.max*a.heightColorBar*2+.75*a.sizeFontPixels))),a.flagCoordinates&&(a.context.font=a.sizeFontPixels+"px Arial",a.context.fillStyle=a.colorFont,i="y = "+Math.round(a.coordinatesSlice.Y),n=a.context.measureText(i).width,a.context.fillText(i,a.widthCanvas.X+a.widthCanvas.Y/2-n/2,Math.round(a.canvas.height-a.sizeFontPixels/2)));case"Z":a.context.fillStyle=a.colorBackground,a.context.fillRect(a.widthCanvas.X+a.widthCanvas.Y,0,a.widthCanvas.Z,a.canvas.height);for(var h=0;h<a.nbSlice.X;h++){var d=h%a.nbCol,u=(h-d)/a.nbCol;a.planes.contextZ.drawImage(a.planes.canvasMaster,d*a.nbSlice.Y,u*a.nbSlice.Z+a.nbSlice.Z-a.numSlice.Z-1,a.nbSlice.Y,1,0,h,a.nbSlice.Y,1)}a.crosshair&&(a.planes.contextZ.fillStyle=a.colorCrosshair,a.planes.contextZ.fillRect(o.Y,a.numSlice.X,a.nbSlice.Y-2*o.Y,1),a.planes.contextZ.fillRect(a.numSlice.Y,o.X,1,a.nbSlice.X-2*o.X)),a.context.drawImage(a.planes.canvasZ,0,0,a.nbSlice.X,a.nbSlice.Y,a.widthCanvas.X+a.widthCanvas.Y,(a.heightCanvas.max-a.heightCanvas.Z)/2,a.widthCanvas.Z,a.heightCanvas.Z),a.flagCoordinates&&(i="z = "+Math.round(a.coordinatesSlice.Z),n=a.context.measureText(i).width,a.context.fillStyle=a.colorFont,a.context.fillText(i,a.widthCanvas.X+a.widthCanvas.Y+a.widthCanvas.Z/2-n/2,Math.round(a.canvas.height-a.sizeFontPixels/2)))}},a.clickBrain=function(t){var e,i,n,r=a.canvas.getBoundingClientRect(),o=t.clientX-r.left,l=t.clientY-r.top;o<a.widthCanvas.X?(i=Math.round((a.nbSlice.Y-1)*(o/a.widthCanvas.X)),n=Math.round((a.nbSlice.Z-1)*((a.heightCanvas.max+a.heightCanvas.X)/2-l)/a.heightCanvas.X),a.numSlice.Y=Math.max(Math.min(i,a.nbSlice.Y-1),0),a.numSlice.Z=Math.max(Math.min(n,a.nbSlice.Z-1),0)):o<a.widthCanvas.X+a.widthCanvas.Y?(o-=a.widthCanvas.X,e=Math.round((a.nbSlice.X-1)*(o/a.widthCanvas.Y)),n=Math.round((a.nbSlice.Z-1)*((a.heightCanvas.max+a.heightCanvas.X)/2-l)/a.heightCanvas.X),a.numSlice.X=Math.max(Math.min(e,a.nbSlice.X-1),0),a.numSlice.Z=Math.max(Math.min(n,a.nbSlice.Z-1),0)):(o=o-a.widthCanvas.X-a.widthCanvas.Y,e=Math.round((a.nbSlice.X-1)*(o/a.widthCanvas.Z)),i=Math.round((a.nbSlice.Y-1)*((a.heightCanvas.max+a.heightCanvas.Z)/2-l)/a.heightCanvas.Z),a.numSlice.X=Math.max(Math.min(e,a.nbSlice.X-1),0),a.numSlice.Y=Math.max(Math.min(i,a.nbSlice.Y-1),0)),a.updateValue(),a.updateCoordinates(),a.drawAll(),a.onclick&&a.onclick(t)},a.drawAll=function(){a.draw(a.numSlice.X,"X"),a.draw(a.numSlice.Y,"Y"),a.draw(a.numSlice.Z,"Z")},a.canvas.addEventListener("click",a.clickBrain,!1),a.canvas.addEventListener("mousedown",function(t){a.canvas.addEventListener("mousemove",a.clickBrain,!1)},!1),a.canvas.addEventListener("mouseup",function(t){a.canvas.removeEventListener("mousemove",a.clickBrain,!1)},!1),a.sprite.addEventListener("load",function(){a.init(),a.drawAll()}),a.overlay&&a.overlay.sprite.addEventListener("load",function(){a.init(),a.drawAll()}),a.init(),a.drawAll(),a},_={name:"brainsprite",props:["base","overlay","id","base_dim_x","base_dim_y","overlay_dim_x","overlay_dim_y"],data:function(){return{brain:null,showOrig:!0,done:!1}},methods:{initBrainSprite:function(){var t=new y({canvas:this.id,sprite:this.id+"_spriteImg",nbSlice:{Y:this.base_dim_x,Z:this.base_dim_y},overlay:{sprite:this.id+"_overlayImg",nbSlice:{Y:this.overlay_dim_x,Z:this.overlay_dim_y},opacity:.5}});this.brain=t,this.showOrig=!1,this.done=!0}},mounted:function(){var t=this;this.$nextTick(function(){setTimeout(function(){t.initBrainSprite()},1)})}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"brainsprite"},[t.done?t._e():a("div",[t._v("Hold on...")]),t._v(" "),a("canvas",{attrs:{id:t.id}}),t._v(" "),t.showOrig?a("img",{staticClass:"hidden",attrs:{id:t.id+"_spriteImg",src:"data:image/png;base64,"+t.base}}):t._e(),t._v(" "),t.overlay&&t.showOrig?a("img",{staticClass:"hidden",attrs:{id:t.id+"_overlayImg",src:"data:image/png;base64,"+t.overlay}}):t._e()])},staticRenderFns:[]};var X=a("VU/8")(_,M,!1,function(t){a("z+In")},"data-v-9be3102a",null).exports,Y={name:"report",components:{sprite4d:u,vueSlider:c.a,lineChart:x,BrainSprite:X},data:function(){return{time:0,spriteSlice:0,report:null}},methods:{get_mid_slice:function(){return Math.floor(this.report.b0.num_slices/2)}},created:function(){var t=this;this.$route.query&&(this.$route.query.url?f.a.get(this.$route.query.url).then(function(e){t.report=e.data}):this.$router.push("/"))},mounted:function(){var t=this;this.reportProp&&(this.report=this.reportProp),this.$nextTick(function(){t.report&&(t.spriteSlice=t.get_mid_slice())})},watch:{reportProp:function(){this.reportProp&&(this.report=this.reportProp)},report:function(){this.report&&(this.spriteSlice=this.get_mid_slice())},$route:function(){var t=this;this.$route.query&&(this.$route.query.url?f.a.get(this.$route.query.url).then(function(e){t.report=e.data}):this.$router.push("/"))}},props:{reportProp:Object}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-3 container"},[t.report?a("div",[a("h2",{staticClass:"mt-3 pt-3"},[t._v("Corrected dwi")]),t._v(" "),a("p",{staticClass:"lead"},[t._v("Result of eddy")]),t._v(" "),t._l(t.report.dwi_corrected,function(e){return a("sprite4d",{key:e.orientation,attrs:{M:e.M,N:e.N,img:e.img,num_slices:e.num_slices,pix:e.pix,id:e.orientation,time:t.time,overlayMode:!1,opacity:"1"}})}),t._v(" "),a("vue-slider",{ref:"timeSlider",attrs:{min:0,max:t.report.dwi_corrected[0].num_slices-1},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),t._v(" "),a("h2",{staticClass:"mt-3 pt-3"},[t._v("Eddy Report")]),t._v(" "),a("p",{staticClass:"lead"},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse1",modifiers:{collapse1:!0}}],attrs:{variant:"primary"}},[t._v("\n      Outliers ("+t._s(t.report.eddy_report.length)+")")])],1),t._v(" "),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse1"}},[a("b-card",t._l(t.report.eddy_report,function(e){return a("p",{key:e},[t._v(t._s(e))])}))],1),t._v(" "),a("div",{staticStyle:{height:"200px",width:"100%",display:"inline-flex"}},[a("line-chart",{attrs:{id:"motion_params",data:t.report.eddy_params,outlier_indices:t.report.outlier_volumes,xlabel:"TR",ylabel:"RMS",highlightIdx:t.time}})],1),t._v(" "),a("h2",{staticClass:"mt-3 pt-3"},[t._v("Registration + Brain Mask")]),t._v(" "),a("p",{staticClass:"lead"},[t._v("Brain mask computed on T1w, and mapped to B0")]),t._v(" "),a("BrainSprite",{ref:"brainMaskSprite",attrs:{id:"brainMaskSprite",base_dim_x:t.report.b0.pix,base_dim_y:t.report.b0.pix,overlay_dim_x:t.report.anat_mask.pix,overlay_dim_y:t.report.anat_mask.pix,base:t.report.b0.img,overlay:t.report.anat_mask.img}}),t._v(" "),a("h2",{staticClass:"mt-3 pt-3"},[t._v("DTI: ColorFA")]),t._v(" "),a("p",{staticClass:"lead"},[t._v("Color FA mapped on B0")]),t._v(" "),a("BrainSprite",{ref:"colorFASprite",attrs:{id:"colorFASprite",base_dim_x:t.report.b0.pix,base_dim_y:t.report.b0.pix,overlay_dim_x:t.report.colorFA.pix,overlay_dim_y:t.report.colorFA.pix,base:t.report.b0.img,overlay:t.report.colorFA.img}})],2):t._e()])},staticRenderFns:[]};var F=a("VU/8")(Y,Z,!1,function(t){a("u02n")},null,null).exports,k={name:"HelloWorld",components:{sprite4d:u,vueSlider:c.a,lineChart:x,report:F},data:function(){return{file:null,msg:"Welcome to Your Vue.js App",report:{},time:0,spriteSlice:0,url:null}},methods:{get_mid_slice:function(){return Math.floor(this.report.b0.num_slices/2)},navigate:function(){console.log(this.url),this.$router.push({path:"/report",query:{url:this.url}})}},watch:{file:function(){if(this.file){var t=new FileReader,e=this;t.onload=function(t){var a=t.target.result;e.report=JSON.parse(a)},t.readAsText(this.file)}},report:function(){this.report.b0&&(this.spriteSlice=this.get_mid_slice())}}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-container",[i("img",{staticClass:"logo",attrs:{src:a("AqYs")}}),t._v(" "),i("h1",[t._v("dmriprep Viewer")]),t._v(" "),i("p",{staticClass:"lead"},[t._v("Upload your report.json file from dmriprep")]),t._v(" "),i("b-form-file",{staticClass:"mt-3",attrs:{state:Boolean(t.file),placeholder:"Choose a file..."},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t._v(" "),i("p",{staticClass:"lead mt-3"},[t._v("OR copy/paste a URL")]),t._v(" "),i("b-input-group",{staticClass:"mb-3",attrs:{size:"md",prepend:"URL"}},[i("b-form-input",{model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}),t._v(" "),i("b-input-group-append",[i("b-btn",{attrs:{size:"md",text:"Button",variant:"primary"},on:{click:t.navigate}},[t._v("Go")])],1)],1),t._v(" "),t.report.b0?i("report",{attrs:{reportProp:t.report}}):t._e()],1)},staticRenderFns:[]};var I=a("VU/8")(k,R,!1,function(t){a("GAJY")},"data-v-7857ceed",null).exports;i.a.use(l.a);var B=new l.a({routes:[{path:"/",name:"HelloWorld",component:I},{path:"/report",name:"Report",component:F}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:B,components:{App:o},template:"<App/>"})},bFKY:function(t,e){},u02n:function(t,e){},"z+In":function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.35c214a5939da2c13b0d.js.map