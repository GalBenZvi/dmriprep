

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Usage &mdash; dmriprep 0.5.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/banner.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Library API (application program interface)" href="api.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> dmriprep
          

          
          </a>

          
            
            
              <div class="version">
                0.5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#execution-and-the-bids-format">Execution and the BIDS format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-arguments">Command-Line Arguments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Positional Arguments">Positional Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Named Arguments">Named Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Options for filtering BIDS queries">Options for filtering BIDS queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Options to handle performance">Options to handle performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Workflow configuration">Workflow configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Specific options for ANTs registrations">Specific options for ANTs registrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Specific options for SyN distortion correction">Specific options for SyN distortion correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Specific options for FreeSurfer preprocessing">Specific options for FreeSurfer preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Surface preprocessing options">Surface preprocessing options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Other options">Other options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-freesurfer-license">The FreeSurfer license</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage-tracking-with-google-analytics">Usage tracking with Google Analytics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Library API (application program interface)</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">What’s new?</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Development road-map</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dmriprep</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  





<section id="usage">
<span id="id1"></span><h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<section id="execution-and-the-bids-format">
<h2>Execution and the BIDS format<a class="headerlink" href="#execution-and-the-bids-format" title="Permalink to this headline">¶</a></h2>
<p>The <em>dMRIPrep</em> workflow takes as principal input the path of the dataset
that is to be processed.
The input dataset is required to be in valid <abbr title="Brain Imaging Data Structure">BIDS</abbr> format, and it must include at least one T1w structural image and
(unless disabled with a flag) one <abbr title="diffusion weighted imaging">DWI</abbr> series.
We highly recommend that you validate your dataset with the free, online
<a class="reference external" href="http://bids-standard.github.io/bids-validator/">BIDS Validator</a>.</p>
<p>The exact command to run <em>dMRIPrep</em> depends on the <a class="reference external" href="installation.html">Installation</a> method.
The common parts of the command follow the <a class="reference external" href="https://github.com/BIDS-Apps">BIDS-Apps</a> definition.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dmriprep</span> <span class="n">data</span><span class="o">/</span><span class="n">bids_root</span><span class="o">/</span> <span class="n">out</span><span class="o">/</span> <span class="n">participant</span> <span class="o">-</span><span class="n">w</span> <span class="n">work</span><span class="o">/</span>
</pre></div>
</div>
</section>
<section id="command-line-arguments">
<h2>Command-Line Arguments<a class="headerlink" href="#command-line-arguments" title="Permalink to this headline">¶</a></h2>
<p><p>dMRIPrep: dMRI PREProcessing workflows v0.5.0+16.gf5080e9a</p>
</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">dmriprep</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">version</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">bids</span><span class="o">-</span><span class="n">validation</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">participant</span><span class="o">-</span><span class="n">label</span> <span class="n">PARTICIPANT_LABEL</span> <span class="p">[</span><span class="n">PARTICIPANT_LABEL</span> <span class="o">...</span><span class="p">]]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">bids</span><span class="o">-</span><span class="nb">filter</span><span class="o">-</span><span class="n">file</span> <span class="n">PATH</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">anat</span><span class="o">-</span><span class="n">derivatives</span> <span class="n">PATH</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">nprocs</span> <span class="n">NPROCS</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">omp</span><span class="o">-</span><span class="n">nthreads</span> <span class="n">OMP_NTHREADS</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">mem</span> <span class="n">MEMORY_GB</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">low</span><span class="o">-</span><span class="n">mem</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">use</span><span class="o">-</span><span class="n">plugin</span> <span class="n">USE_PLUGIN</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">anat</span><span class="o">-</span><span class="n">only</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">boilerplate_only</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">md</span><span class="o">-</span><span class="n">only</span><span class="o">-</span><span class="n">boilerplate</span><span class="p">]</span>
                <span class="p">[</span><span class="o">-</span><span class="n">v</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">ignore</span> <span class="p">{</span><span class="n">fieldmaps</span><span class="p">,</span><span class="n">sbref</span><span class="p">,</span><span class="n">eddy</span><span class="p">}</span> <span class="p">[{</span><span class="n">fieldmaps</span><span class="p">,</span><span class="n">sbref</span><span class="p">,</span><span class="n">eddy</span><span class="p">}</span> <span class="o">...</span><span class="p">]]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">longitudinal</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">spaces</span> <span class="p">[</span><span class="n">OUTPUT_SPACES</span> <span class="p">[</span><span class="n">OUTPUT_SPACES</span> <span class="o">...</span><span class="p">]]]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">dwi2t1w</span><span class="o">-</span><span class="n">init</span> <span class="p">{</span><span class="n">register</span><span class="p">,</span><span class="n">header</span><span class="p">}]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">skull</span><span class="o">-</span><span class="n">strip</span><span class="o">-</span><span class="n">template</span> <span class="n">SKULL_STRIP_TEMPLATE</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">skull</span><span class="o">-</span><span class="n">strip</span><span class="o">-</span><span class="n">fixed</span><span class="o">-</span><span class="n">seed</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">use</span><span class="o">-</span><span class="n">syn</span><span class="o">-</span><span class="n">sdc</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">force</span><span class="o">-</span><span class="n">syn</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">license</span><span class="o">-</span><span class="n">file</span> <span class="n">PATH</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">subjects</span><span class="o">-</span><span class="nb">dir</span> <span class="n">PATH</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">submm</span><span class="o">-</span><span class="n">recon</span> <span class="o">|</span> <span class="o">--</span><span class="n">fs</span><span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">reconall</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span> <span class="n">WORK_DIR</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">clean</span><span class="o">-</span><span class="n">workdir</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">resource</span><span class="o">-</span><span class="n">monitor</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">reports</span><span class="o">-</span><span class="n">only</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">run</span><span class="o">-</span><span class="n">uuid</span> <span class="n">RUN_UUID</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">write</span><span class="o">-</span><span class="n">graph</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">stop</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">first</span><span class="o">-</span><span class="n">crash</span><span class="p">]</span>
                <span class="p">[</span><span class="o">--</span><span class="n">notrack</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">sloppy</span><span class="p">]</span>
                <span class="n">bids_dir</span> <span class="n">output_dir</span> <span class="p">{</span><span class="n">participant</span><span class="p">}</span>
</pre></div>
</div>
<section id="Positional Arguments">
<h3>Positional Arguments<a class="headerlink" href="#Positional Arguments" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>bids_dir</kbd></dt>
<dd><p>the root folder of a BIDS valid dataset (sub-XXXXX folders should be found at the top level in this folder).</p>
</dd>
<dt><kbd>output_dir</kbd></dt>
<dd><p>the output path for the outcomes of preprocessing and visual reports</p>
</dd>
<dt><kbd>analysis_level</kbd></dt>
<dd><p>Possible choices: participant</p>
<p>processing stage to be run, only “participant” in the case of dMRIPrep (see BIDS-Apps specification).</p>
</dd>
</dl>
</section>
<section id="Named Arguments">
<h3>Named Arguments<a class="headerlink" href="#Named Arguments" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>--version</kbd></dt>
<dd><p>show program’s version number and exit</p>
</dd>
</dl>
</section>
<section id="Options for filtering BIDS queries">
<h3>Options for filtering BIDS queries<a class="headerlink" href="#Options for filtering BIDS queries" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>--skip-bids-validation</kbd></dt>
<dd><p>assume the input dataset is BIDS compliant and skip the validation</p>
</dd>
<dt><kbd>--participant-label, --participant_label</kbd></dt>
<dd><p>a space delimited list of participant identifiers or a single identifier (the sub- prefix can be removed)</p>
</dd>
<dt><kbd>--bids-filter-file</kbd></dt>
<dd><p>a JSON file describing custom BIDS input filter using pybids {&lt;suffix&gt;:{&lt;entity&gt;:&lt;filter&gt;,…},…} (<a class="reference external" href="https://github.com/bids-standard/pybids/blob/master/bids/layout/config/bids.json">https://github.com/bids-standard/pybids/blob/master/bids/layout/config/bids.json</a>)</p>
</dd>
<dt><kbd>--anat-derivatives</kbd></dt>
<dd><p>Reuse the anatomical derivatives from another fMRIPrep run or calculated with an alternative processing tool (NOT RECOMMENDED).</p>
</dd>
</dl>
</section>
<section id="Options to handle performance">
<h3>Options to handle performance<a class="headerlink" href="#Options to handle performance" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>--nprocs, --nthreads, --n_cpus, -n-cpus</kbd></dt>
<dd><p>maximum number of threads across all processes</p>
</dd>
<dt><kbd>--omp-nthreads</kbd></dt>
<dd><p>maximum number of threads per-process</p>
</dd>
<dt><kbd>--mem, --mem_mb, --mem-mb</kbd></dt>
<dd><p>upper bound memory limit for dMRIPrep processes</p>
</dd>
<dt><kbd>--low-mem</kbd></dt>
<dd><p>attempt to reduce memory usage (will increase disk usage in working directory)</p>
</dd>
<dt><kbd>--use-plugin</kbd></dt>
<dd><p>nipype plugin configuration file</p>
</dd>
<dt><kbd>--anat-only</kbd></dt>
<dd><p>run anatomical workflows only</p>
</dd>
<dt><kbd>--boilerplate_only</kbd></dt>
<dd><p>generate boilerplate only</p>
</dd>
<dt><kbd>--md-only-boilerplate</kbd></dt>
<dd><p>skip generation of HTML and LaTeX formatted citation with pandoc</p>
</dd>
<dt><kbd>-v, --verbose</kbd></dt>
<dd><p>increases log verbosity for each occurrence, debug level is -vvv</p>
</dd>
</dl>
</section>
<section id="Workflow configuration">
<h3>Workflow configuration<a class="headerlink" href="#Workflow configuration" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>--ignore</kbd></dt>
<dd><p>Possible choices: fieldmaps, sbref, eddy</p>
<p>ignore selected aspects of the input dataset to disable corresponding parts of the workflow (a space delimited list)</p>
</dd>
<dt><kbd>--longitudinal</kbd></dt>
<dd><p>treat dataset as longitudinal - may increase runtime</p>
</dd>
<dt><kbd>--output-spaces</kbd></dt>
<dd><p>Standard and non-standard spaces to resample anatomical and diffusion images to. Standard spaces may be specified by the form <code class="docutils literal notranslate"><span class="pre">&lt;SPACE&gt;[:cohort-&lt;label&gt;][:res-&lt;resolution&gt;][...]</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;SPACE&gt;</span></code> is a keyword designating a spatial reference, and may be followed by optional, colon-separated parameters. Non-standard spaces imply specific orientations and sampling grids. The default value of this flag (meaning, if the argument is not include in the command line) is <code class="docutils literal notranslate"><span class="pre">--output-spaces</span> <span class="pre">run</span></code> - the original space and sampling grid of the original DWI run. Important to note, the <code class="docutils literal notranslate"><span class="pre">res-*</span></code> modifier does not define the resolution used for the spatial normalization. To generate no DWI outputs (if that is intended for some reason), use this option without specifying any spatial references. For further details, please check out <a class="reference external" href="https://www.nipreps.org/dmriprep/en/0.5.0/spaces.html">https://www.nipreps.org/dmriprep/en/0.5.0/spaces.html</a></p>
</dd>
<dt><kbd>--dwi2t1w-init</kbd></dt>
<dd><p>Possible choices: register, header</p>
<p>Either “register” (the default) to initialize volumes at center or “header” to use the header information when co-registering DWI to T1w images.</p>
</dd>
</dl>
</section>
<section id="Specific options for ANTs registrations">
<h3>Specific options for ANTs registrations<a class="headerlink" href="#Specific options for ANTs registrations" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>--skull-strip-template</kbd></dt>
<dd><p>select a template for skull-stripping with antsBrainExtraction</p>
</dd>
<dt><kbd>--skull-strip-fixed-seed</kbd></dt>
<dd><p>do not use a random seed for skull-stripping - will ensure run-to-run replicability when used with –omp-nthreads 1</p>
</dd>
</dl>
</section>
<section id="Specific options for SyN distortion correction">
<h3>Specific options for SyN distortion correction<a class="headerlink" href="#Specific options for SyN distortion correction" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>--use-syn-sdc</kbd></dt>
<dd><p>Attempt to set-up fieldmap-less estimation of fieldmaps via nonlinear registration with ANTs if no other fieldmap estimation method is available. Fieldmap-less estimation will not be used when sufficient fieldmap information (B0 mapping with SEI or GRE, or PEPOLAR estimation with EPIs) is retrieved from the BIDS structure for a given subject.</p>
</dd>
<dt><kbd>--force-syn</kbd></dt>
<dd><p>Force estimation of fieldmaps with the fieldmap-less approach. The use of this feature is discouraged.</p>
</dd>
</dl>
</section>
<section id="Specific options for FreeSurfer preprocessing">
<h3>Specific options for FreeSurfer preprocessing<a class="headerlink" href="#Specific options for FreeSurfer preprocessing" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>--fs-license-file</kbd></dt>
<dd><p>Path to FreeSurfer license key file. Get it (for free) by registering at <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/registration.html">https://surfer.nmr.mgh.harvard.edu/registration.html</a></p>
</dd>
<dt><kbd>--fs-subjects-dir</kbd></dt>
<dd><p>Path to existing FreeSurfer subjects directory to reuse. (default: OUTPUT_DIR/freesurfer)</p>
</dd>
</dl>
</section>
<section id="Surface preprocessing options">
<h3>Surface preprocessing options<a class="headerlink" href="#Surface preprocessing options" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>--no-submm-recon</kbd></dt>
<dd><p>disable sub-millimeter (hires) reconstruction</p>
</dd>
<dt><kbd>--fs-no-reconall</kbd></dt>
<dd><p>disable FreeSurfer surface preprocessing.</p>
</dd>
</dl>
</section>
<section id="Other options">
<h3>Other options<a class="headerlink" href="#Other options" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>-w, --work-dir</kbd></dt>
<dd><p>path where intermediate results should be stored</p>
</dd>
<dt><kbd>--clean-workdir</kbd></dt>
<dd><p>Clears working directory of contents. Use of this flag is notrecommended when running concurrent processes of dMRIPrep.</p>
</dd>
<dt><kbd>--resource-monitor</kbd></dt>
<dd><p>enable Nipype’s resource monitoring to keep track of memory and CPU usage</p>
</dd>
<dt><kbd>--reports-only</kbd></dt>
<dd><p>only generate reports, don’t run workflows. This will only rerun report aggregation, not ‘reportlet’ generation for specific nodes.</p>
</dd>
<dt><kbd>--run-uuid</kbd></dt>
<dd><p>Specify UUID of previous run, to include error logs in report. No effect without –reports-only.</p>
</dd>
<dt><kbd>--write-graph</kbd></dt>
<dd><p>Write workflow graph.</p>
</dd>
<dt><kbd>--stop-on-first-crash</kbd></dt>
<dd><p>Force stopping on first crash, even if a work directory was specified.</p>
</dd>
<dt><kbd>--notrack</kbd></dt>
<dd><p>Opt-out of sending tracking information of this run to the dMRIPREP developers. This information helps to improve dMRIPREP and provides an indicator of real world usage crucial for obtaining funding.</p>
</dd>
<dt><kbd>--sloppy</kbd></dt>
<dd><p>Use low-quality tools for speed - TESTING ONLY</p>
</dd>
</dl>
</section>
</section>
<section id="the-freesurfer-license">
<span id="fs-license"></span><h2>The FreeSurfer license<a class="headerlink" href="#the-freesurfer-license" title="Permalink to this headline">¶</a></h2>
<p><em>dMRIPrep</em> uses FreeSurfer tools, which require a license to run.</p>
<p>To obtain a FreeSurfer license, simply register for free at
<a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/registration.html">https://surfer.nmr.mgh.harvard.edu/registration.html</a>.</p>
<p>When using manually-prepared environments or Singularity, FreeSurfer will search
for a license key file first using the <code class="docutils literal notranslate"><span class="pre">$FS_LICENSE</span></code> environment variable and then
in the default path to the license key file (<code class="docutils literal notranslate"><span class="pre">$FREESURFER_HOME/license.txt</span></code>).
If using the <code class="docutils literal notranslate"><span class="pre">--cleanenv</span></code> flag and <code class="docutils literal notranslate"><span class="pre">$FS_LICENSE</span></code> is set, use <code class="docutils literal notranslate"><span class="pre">--fs-license-file</span> <span class="pre">$FS_LICENSE</span></code>
to pass the license file location to <em>dMRIPrep</em>.</p>
<p>It is possible to run the Docker container pointing the image to a local path
where a valid license file is stored.
For example, if the license is stored in the <code class="docutils literal notranslate"><span class="pre">$HOME/.licenses/freesurfer/license.txt</span></code>
file on the host system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -ti --rm \
    -v $HOME/fullds005:/data:ro \
    -v $HOME/dockerout:/out \
    -v $HOME/.licenses/freesurfer/license.txt:/opt/freesurfer/license.txt \
    nipreps/dmriprep:latest \
    /data /out/out \
    participant \
    --ignore fieldmaps
</pre></div>
</div>
</section>
<section id="usage-tracking-with-google-analytics">
<h2>Usage tracking with Google Analytics<a class="headerlink" href="#usage-tracking-with-google-analytics" title="Permalink to this headline">¶</a></h2>
<p>To be able to assess usage of the software, we are recording each use of the
<abbr title="command-line interface">CLI</abbr> as an event in Google Analytics,
using <a class="reference external" href="https://popylar.github.io">popylar</a>.
``</p>
<p>For now, the only information that we are recording is the fact that the CLI was
called and whether the call completed successfully. In addition, through Google
Analytics, we will have access to very general information, such as the country
and city in which the computer using the CLI was located and the time that it
was used. At this time, we do not record any additional information, although in
the future we may want to record statistics on the computational environment in
which the CLI was called, such as the operating system.</p>
<p>Opting out of this usage tracking can be done by calling the CLI with the
<code class="docutils literal notranslate"><span class="pre">--notrack</span></code> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dmriprep</span> <span class="n">data</span><span class="o">/</span><span class="n">bids_root</span><span class="o">/</span> <span class="n">out</span><span class="o">/</span> <span class="n">participant</span> <span class="o">-</span><span class="n">w</span> <span class="n">work</span><span class="o">/</span> <span class="o">--</span><span class="n">notrack</span>
</pre></div>
</div>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="api.html" class="btn btn-neutral float-right" title="Library API (application program interface)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Copyright 2019, The dMRIPrep developers.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: master
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="0.2.1/usage.html">0.2.1</a></dd>
            <dd><a href="0.2.2/usage.html">0.2.2</a></dd>
            <dd><a href="0.3.0/usage.html">0.3.0</a></dd>
            <dd><a href="0.4.0/usage.html">0.4.0</a></dd>
            <dd><a href="0.5.0/usage.html">0.5.0</a></dd>
            <dd><a href="0.5.0rc0/usage.html">0.5.0rc0</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="master/usage.html">master</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>